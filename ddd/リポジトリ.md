## リポジトリとは ?
- 集約のインスタンスの置く。後でリポジトリを使って、同じインスタンスを取得する。
- 集約とリポジトリは 1 - 1 になる。型の階層がある場合には単一のリポジトリを共有している場合もある。
- 集約がメモリ上にあると錯覚させる。
- よく知られているグローバルインタフェースを経由してアクセスさせる。
- オブジェクトの追加と削除を行うメソッドを提供すること。
- 単一のオブジェクトかオブジェクトの配列を返却する検索メソッドを提供すること。
- 論理削除をする場合には削除インタフェースをリポジトリに含めないほうが、クライアントから使えない意思表示になる。
- インタフェースの定義は格納する集約と同じモジュールに配置する。
- リポジトリは可能な限りコレクションを真似る
- 非機能要件を満たすため、処理をデータストアに移す場合には、ドメインサービスの制御下におく。
- 腐敗防止層としてコンテキストを統合し、集約を返却しても良い。値オブジェクトを返却する場合には場違いだが、集約が返却される場合には自然に見える。
